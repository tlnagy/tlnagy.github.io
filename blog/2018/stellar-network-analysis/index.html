<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> A deep dive into the Stellar public network (Part 1) | Tamas L. Nagy </title> <meta name="author" content="Tamas L. Nagy"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%94%AC&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://tlnagy.github.io/blog/2018/stellar-network-analysis/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Tamas</span> L. Nagy, Ph.D. </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/software/">software </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">A deep dive into the Stellar public network (Part 1)</h1> <p class="post-meta"> Created on March 18, 2018 by Tamas Nagy </p> <p class="post-tags"> <a href="/blog/2018"> <i class="fa-solid fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/tag/crypto"> <i class="fa-solid fa-hashtag fa-sm"></i> crypto</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>One of the basic tenets of public blockchains is that all account and transactional information is open to anyone to see. While I’m pretty certain that most cryptocurrencies will eventually adopt some type of zero-knowledge cryptography (e.g. <a href="https://z.cash/technology/zksnarks.html" rel="external nofollow noopener" target="_blank">zk-snarks</a>) that would make this sort of analysis impossible or much more difficult, many still have everything recorded in the clear, e.g. the <a href="https://stellar.org" rel="external nofollow noopener" target="_blank">Stellar network</a> and its corresponding currency, Lumens (XLM).</p> <p>Stellar is an interesting project because it does not rely on the extremely wasteful proof-of-work consensus method (used by Bitcoin and Ethereum). It instead uses the Stellar Consensus Protocol (SCP), which is a form of a federated Byzantine agreement. There’s a <a href="https://medium.com/a-stellar-journey/on-worldwide-consensus-359e9eb3e949" rel="external nofollow noopener" target="_blank">technical summary</a> and a <a href="https://www.stellar.org/papers/stellar-consensus-protocol.pdf" rel="external nofollow noopener" target="_blank">white paper</a> that both explain how SCP works<sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>. Its key benefits are that it is both fast (1000+ transactions per second) and environmentally friendly (extremely low energy costs).</p> <p><strong>Okay, so Stellar is cool, but how are people using it?</strong> This was the question that spawned this analysis. I wanted to see what I could find out from the Stellar’s public blockchain about how people (and bots) were using it. This is part 1 of what I hope is a multipart dive into the Stellar network<sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup>. Some questions I hope to answer:</p> <ol> <li><a href="#account-inflation-destination-distribution">What is the inflation destination distribution across accounts?</a></li> <li><a href="#correlation-between-account-balance-and-age">Is there a correlation between account balance and age?</a></li> <li>Are most accounts just holding<sup id="fnref:3"><a href="#fn:3" class="footnote" rel="footnote" role="doc-noteref">3</a></sup> lumens or are they actually moving around?</li> <li>What is the topology of the transaction graph? Is it more hub-and-spoke or more Erdős-Rényi like?</li> <li>Can I detect when major giveaways and changes to the protocol happened?</li> </ol> <h2 id="getting-the-data">Getting the data</h2> <p>While Stellar’s documentation is surprisingly good compared to other cryptoprojects, it took a bit of finagling to get everything to work, but that might be more indicative of my newness to the whole scene.</p> <p>The first step was actually getting the data. Stellar has a convenient RESTful API for many things via <a href="https://github.com/stellar/horizon" rel="external nofollow noopener" target="_blank">Horizon</a>, but that isn’t <a href="https://stellar.stackexchange.com/questions/729/possible-to-get-a-list-of-account-holders-satisfying-certain-criteria-using-hori?noredirect=1#comment597_729" rel="external nofollow noopener" target="_blank">sufficient</a> for my needs so I needed to set up a full node locally.</p> <h3 id="setting-up-a-local-node">Setting up a local node</h3> <p>The easiest way to do this is via <a href="https://www.docker.com/" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">Docker</code></a> and once you install it, provisioning a Stellar node is a easy<sup id="fnref:4"><a href="#fn:4" class="footnote" rel="footnote" role="doc-noteref">4</a></sup> as running the following command in your terminal (don’t type the preceding <code class="language-plaintext highlighter-rouge">$</code>):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --rm -it -p "8000:8000" -p "5432:5432" -v ~/Documents/stellar:/opt/stellar --name stellar stellar/quickstart --pubnet
</code></pre></div></div> <p><strong>Make sure to enter a password in for the PostgreSQL database and that you write it down. You’ll need it to connect to the database later.</strong></p> <p>The above command tells Docker to download the <a href="https://github.com/stellar/docker-stellar-core-horizon" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">stellar/quickstart</code></a> Docker image and create a volume at <code class="language-plaintext highlighter-rouge">~/Documents/stellar</code> where the Stellar node will store all of its data. It will also expose the HTML and PostgreSQL ports locally too. We’ll need the latter one to actually access the data. Finally, the <code class="language-plaintext highlighter-rouge">--pubnet</code> flag tells the node to use the public network (i.e. real lumens).</p> <p>Once you run this command you’ll need to wait till the node is synchronized with the network. You can check its progress by connecting to the Docker container</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker exec -it stellar /bin/bash
</code></pre></div></div> <p>which opens a connection to the container’s shell. You can then run</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ stellar-core --c 'info'
</code></pre></div></div> <p>to ask query the state of your node. The key thing is to look at the <code class="language-plaintext highlighter-rouge">"state"</code> value below, it should eventually read <code class="language-plaintext highlighter-rouge">"Synced!"</code></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Length: 761
Content-Type: application/json

2018-03-18T02:55:14.579 GACID [default INFO] {
   "info" : {
      "authenticated_peers_count" : 8,
      "build" : "v9.1.0",
      "ledger" : {
         "age" : 8,
         "baseFee" : 100,
         "baseReserve" : 5000000,
         "closeTime" : 1521341706,
         "hash" : "260f4e039fb7835c376b0402fec928049c2071412c1fdfcf220445b67a95ad7e",
         "num" : 16874829,
         "version" : 9
      },
      "network" : "Public Global Stellar Network ; September 2015",
      "pending_peers_count" : 0,
      "protocol_version" : 9,
      "quorum" : {
         "16874828" : {
            "agree" : 5,
            "disagree" : 0,
            "fail_at" : 2,
            "hash" : "ba2fc8",
            "missing" : 0,
            "phase" : "EXTERNALIZE"
         }
      },
      "state" : "Synced!"
   }
}
</code></pre></div></div> <p>The last ledger was <a href="https://stellarchain.io/ledger/16874860" rel="external nofollow noopener" target="_blank">16874860</a> when I shutdown my node to prevent the data from mutating during my analysis.</p> <h3 id="querying-the-data">Querying the data</h3> <p>I used <a href="https://eggerapps.at/postico/" rel="external nofollow noopener" target="_blank">Postico</a> to actually query the data, but any PostgreSQL client will work.</p> <p><img src="/assets/images/2018-03-18-stellar-network-analysis/f6930827.png" alt=""></p> <p>You’ll need to tell it to connect to the PostgreSQL instance by telling it to connect to localhost on port 5432, with <code class="language-plaintext highlighter-rouge">stellar</code> as the username and the password you entered from above. The main database we’ll be interacting with is <code class="language-plaintext highlighter-rouge">core</code>. You can then execute any SQL query against the database.</p> <h2 id="analysis">Analysis</h2> <p>Now to the fun part, actually answering some questions! All my analysis was done in <a href="https://julialang.org" rel="external nofollow noopener" target="_blank">Julia</a> and my jupyter notebook is available <a href="https://gist.github.com/tlnagy/13c88fb4987ab4081cbc043b31a5e018" rel="external nofollow noopener" target="_blank">here</a>.</p> <h3 id="account-inflation-destination-distribution">Account inflation destination distribution</h3> <p>One major concept of the Stellar network is the concept of <a href="https://www.stellar.org/developers/guides/concepts/inflation.html" rel="external nofollow noopener" target="_blank">inflation</a>.</p> <blockquote> <p>The Stellar distributed network has a built-in, fixed, nominal inflation mechanism. New lumens are added to the network at the rate of 1% each year. Each week, the protocol distributes these lumens to any account that gets over .05% of the “votes” from other accounts in the network.</p> </blockquote> <p>My understanding is that lumens that are distributed are both new lumens that are added (at the rate of 1% of each year) and the lumens collected from transaction fees<sup id="fnref:5"><a href="#fn:5" class="footnote" rel="footnote" role="doc-noteref">5</a></sup>. But…lumens are only distributed if an inflation destination is set. I wanted to look at the inflation destinations ordered by the total amount of XLM in the accounts pointed at each destination (on left) and the number of accounts pointed at each destination (on right).</p> <p><img src="/assets/images/2018-03-18-stellar-network-analysis/inflationdest.svg" alt=""></p> <p>First thing, there are a lot of accounts without a set inflation destination (i.e. a NULL destination). 6.7 billion lumens are not earning inflation, which works out to 37% of all distributed lumens. It’s even worse if you look at the level of accounts. 76% percent of all accounts aren’t earning any inflation! The biggest community pool (balance-wise) is <a href="https://lumenaut.net/" rel="external nofollow noopener" target="_blank">GCCD..NAUT</a>, which is one of the newer pools that has no fees. Pretty cool that it caught on so quick.</p> <p>I don’t understand why manual setting of the inflation destination is necessary. Why can’t the lumens be distributed to every account equally? I just find it unfortunate that the majority of accounts aren’t taking advantage of the inflation payouts.</p> <h3 id="correlation-between-account-balance-and-age">Correlation between account balance and age</h3> <p>Another thing I wanted to look at is if there was any correlation between the age of an account and the size of the balance. The account creation time is not stored, but there is a last modified time. Plotting the 2D histogram of the last modified time versus balance size gives this:</p> <p><img src="/assets/images/2018-03-18-stellar-network-analysis/balanceage.svg" alt=""></p> <p>Couple interesting points. You can clearly see when the minimum account balance was lowered from 10 XLM to 0.5 XLM in <a href="https://github.com/stellar/docs/commit/9c0100d80d32dfff9d9d071b77def6bf8599b151#diff-fe29f1f4bf5e6ceed24a2a27a5d241c6" rel="external nofollow noopener" target="_blank">January</a>. There is also a strip around 5000 XLM, which are probably old accounts that received free lumens, but were forgotten.</p> <p>In the next part, I’ll map transactions to each account so then I’ll be able to find the oldest transaction for each account to determine its age instead of using the last modified time. I also hope to answer the rest of the questions outlined above.</p> <p>If you made it this far and have any more ideas for what I could look into, tweet at me (<a href="https://twitter.com/tlngy" rel="external nofollow noopener" target="_blank">\@tlngy</a>).</p> <p>some time in the future. Hopefully, it will help me a better understanding of the limitations and weaknesses of the protocol design.</p> <p>locally on my MacOS machine, but ran into issues with the <a href="https://stellar.stackexchange.com/questions/731/running-into-an-invalid-quorum-set-error-when-running-stellar-core?noredirect=1#comment594_731" rel="external nofollow noopener" target="_blank">config file</a>. Apparently, the default config file ships with a non-functional quorum-set (probably a good thing to make sure people actually think about which nodes they list here, heh).</p> <p>the miners.</p> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1"> <p>I plan to write an intuitive description of how SCP works on this blog <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:2"> <p>That depends heavily on the amount of free time I have, heh. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:3"> <p>hodling <a href="#fnref:3" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:4"> <p>I originally tried setting up an instance by compiling stellar-core <a href="#fnref:4" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:5"> <p>In proof-of-work currencies, the transaction fees are much higher and paid to <a href="#fnref:5" class="reversefootnote" role="doc-backlink">↩</a></p> </li> </ol> </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/grad-student-taxes/">UCSF Graduate Student Taxes FAQ</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2014/scientific-writing-pandoc/">Scholarly Markdown for Scientific Writing </a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/ile-rackbag/">Inside Lines Equipment Porteur Rackbag Review</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2014/life-sans-facebook/">Life, Sans Facebook</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2013/open/">Open</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Tamas L. Nagy. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: November 05, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="https://stats.tamasnagy.com/script.js" data-website-id="63767397-8027-4beb-aca4-f8b6dba045e1"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>